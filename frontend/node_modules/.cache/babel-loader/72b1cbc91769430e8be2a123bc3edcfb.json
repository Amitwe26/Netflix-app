{"ast":null,"code":"import { httpService } from './httpService';\nimport { storageService } from './storageService';\nconst BASE_URL = 'api';\n\nasync function login(userNetflix) {\n  const user = await httpService.post(`${BASE_URL}/auth/login`, userNetflix);\n\n  if (user) {\n    console.log('user is succses is:', user);\n\n    _saveLocalUser(user);\n\n    return user;\n  } // return httpService.get(`${BASE_URL}/user`)\n\n}\n\nasync function signup(userCred) {\n  const user = await httpService.post(`${BASE_URL}/auth/signup`, userCred.newUser);\n  return _saveLocalUser(user);\n}\n\nasync function addProfile(newProfile, userLogin) {\n  console.log('userLogin is:', JSON.parse(userLogin));\n  newProfile.id = _makeId();\n  newProfile.movies = [];\n  userLogin.profiles.push(newProfile);\n  console.log('userLogin after  is:', userLogin);\n  const user = await httpService.put(`${BASE_URL}/user/${userLogin._id}`, userLogin);\n  return _saveLocalUser(user);\n}\n\nasync function getUser(email, password) {\n  const info = {};\n  info.email = email;\n  info.password = password;\n  const user = await httpService.get(`${BASE_URL}/user`, info);\n  return Promise.resolve(user);\n}\n\nfunction getProfiles(user) {\n  if (Object.keys(user).length === 0) {\n    const profilesFromStorge = storageService.loadFromStorage('profiles');\n    return Promise.resolve(profilesFromStorge);\n  } else {\n    const profilesToUser = user.profiles;\n    storageService.saveToStorage('profiles', profilesToUser);\n    return Promise.resolve(profilesToUser);\n  }\n} // async function getProfile(info) {\n//     const { profileId, nicknameUser } = info\n//     const idx = users.findIndex(user => user.nickname === nicknameUser)\n//     const profile = users[idx].profiles.find(profile => profile._id === profileId)\n//     console.log(' profileis:', profile);\n//     return profile\n// }\n\n\nfunction _saveLocalUser(user) {\n  sessionStorage.setItem('loggedinUser', JSON.stringify(user));\n  return user;\n}\n\nfunction _makeId(length = 5) {\n  var text = \"\";\n  var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\n  for (var i = 0; i < length; i++) {\n    text += possible.charAt(Math.floor(Math.random() * possible.length));\n  }\n\n  return text;\n}\n\nexport const userService = {\n  login,\n  signup,\n  getProfiles,\n  addProfile,\n  _makeId,\n  getUser\n};","map":{"version":3,"sources":["/Users/amit/Desktop/Dev/Simples/netflix-app/frontend/src/services/usersService.js"],"names":["httpService","storageService","BASE_URL","login","userNetflix","user","post","console","log","_saveLocalUser","signup","userCred","newUser","addProfile","newProfile","userLogin","JSON","parse","id","_makeId","movies","profiles","push","put","_id","getUser","email","password","info","get","Promise","resolve","getProfiles","Object","keys","length","profilesFromStorge","loadFromStorage","profilesToUser","saveToStorage","sessionStorage","setItem","stringify","text","possible","i","charAt","Math","floor","random","userService"],"mappings":"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","sourcesContent":["\nimport { httpService } from './httpService'\nimport { storageService } from './storageService'\n\nconst BASE_URL = 'api'\n\n\nasync function login(userNetflix) {\n    const user = await httpService.post(`${BASE_URL}/auth/login`, userNetflix)\n    if (user) {\n        console.log('user is succses is:', user);\n        _saveLocalUser(user)\n        return user\n    }\n    // return httpService.get(`${BASE_URL}/user`)\n}\n\nasync function signup(userCred) {\n    const user = await httpService.post(`${BASE_URL}/auth/signup`, userCred.newUser)\n    return _saveLocalUser(user)\n}\n\nasync function addProfile(newProfile, userLogin) {\n    console.log('userLogin is:', JSON.parse(userLogin));\n    newProfile.id = _makeId()\n    newProfile.movies = []\n    userLogin.profiles.push(newProfile)\n    console.log('userLogin after  is:', userLogin);\n    const user = await httpService.put(`${BASE_URL}/user/${userLogin._id}`, userLogin)\n    return _saveLocalUser(user)\n}\n\nasync function getUser(email, password) {\n    const info = {}\n    info.email = email\n    info.password = password\n    const user = await httpService.get(`${BASE_URL}/user`, info)\n    return Promise.resolve(user)\n}\n\nfunction getProfiles(user) {\n    if (Object.keys(user).length === 0) {\n        const profilesFromStorge = storageService.loadFromStorage('profiles')\n        return Promise.resolve(profilesFromStorge)\n    } else {\n        const profilesToUser = user.profiles\n        storageService.saveToStorage('profiles', profilesToUser)\n        return Promise.resolve(profilesToUser)\n    }\n\n}\n\n// async function getProfile(info) {\n//     const { profileId, nicknameUser } = info\n//     const idx = users.findIndex(user => user.nickname === nicknameUser)\n//     const profile = users[idx].profiles.find(profile => profile._id === profileId)\n\n//     console.log(' profileis:', profile);\n//     return profile\n// }\n\nfunction _saveLocalUser(user) {\n    sessionStorage.setItem('loggedinUser', JSON.stringify(user))\n    return user\n}\n\nfunction _makeId(length = 5) {\n    var text = \"\";\n    var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n    for (var i = 0; i < length; i++) {\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\n    }\n    return text;\n}\nexport const userService = {\n    login,\n    signup,\n    getProfiles,\n    addProfile,\n    _makeId,\n    getUser\n}"]},"metadata":{},"sourceType":"module"}